workflow agent_demo {
  on: workflow_dispatch

  agent_job review {
    runs_on: ubuntu-latest
    steps: [
      uses("actions/checkout@v4"),
      agent_task("Review the codebase and provide feedback") {
        model: "claude-sonnet-4-20250514"
        max_turns: 5
        tools: {
          allowed: ["Read", "Glob", "Grep"]
        }
        output_schema: {
          overall_rating: int
          summary: string
          issues: [{ filepath: string line_number: int severity: "error" | "warning" | "info" description: string }]
          recommendations: [string]
        }
        output_artifact: "review_result"
      }
    ]
  }
}
